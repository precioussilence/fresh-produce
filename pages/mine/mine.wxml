<!--pages/mine/mine.wxml-->
<custom-navbar title="我的" />
<view class="mine-container">
  <view class="user-section">
    <t-cell-group class="user-card">
      <t-cell bordered="{{false}}">
        <view slot="title" class="user-header">
          <view class="user-avatar">
            <t-avatar wx:if="{{isLogin}}" image="{{userInfo.avatarUrl}}" size="large" />
            <t-avatar wx:else icon="user" size="large" />
          </view>
          <view class="user-detail" wx:if="{{isLogin}}">
            <view class="user-name">{{userInfo.nickName || '用户昵称'}}</view>
            <view class="user-id">会员ID: {{userInfo.id || '123456'}}</view>
          </view>
          <view class="login-btn" wx:else>
            <t-button theme="primary" size="small" bind:tap="handleLogin">立即登录</t-button>
          </view>
        </view>
      </t-cell>
    </t-cell-group>
  </view>
  <view class="order-section">
    <view class="section-header">
      <view class="section-title">我的订单</view>
      <view
        class="section-more"
        bind:tap="goToOrder"
        data-url="/pages/order/list?type=all"
        data-text="查看全部"
      >
        查看全部 <t-icon name="chevron-right" size="32rpx" />
      </view>
    </view>
    <t-grid class="order-grid" column="{{4}}">
      <t-grid-item
        wx:for="{{orderTypes}}"
        wx:key="index"
        text="{{item.text}}"
        icon="{{item.icon}}"
        badge-props="{{ { count: item.badge } }}"
        bind:tap="goToOrder"
        data-url="{{item.url}}"
        data-text="{{item.text}}"
      />
    </t-grid>
  </view>
  <view class="service-section">
    <view class="section-header">
      <view class="section-title">我的服务</view>
    </view>
    <t-grid class="service-grid" column="{{4}}">
      <t-grid-item
        wx:for="{{services}}"
        wx:key="text"
        text="{{item.text}}"
        icon="{{item.icon}}"
        bind:tap="goToService"
        data-url="{{item.url}}"
        data-text="{{item.text}}"
      />
    </t-grid>
  </view>
  <view class="recommend-section">
    <view class="recommend-banner">
      <view class="banner-text">为你推荐</view>
    </view>
    <view class="recommend-goods">
      <view
        class="goods-item"
        wx:for="{{recommendGoods}}"
        wx:key="index"
        bind:tap="goToGoodsDetail"
        data-id="{{item.id}}"
      >
        <view class="goods-card">
          <view>
            <t-image src="{{item.image}}" mode="aspectFill" t-class="goods-image" />
          </view>
          <view class="goods-info">
            <view class="goods-title">{{item.title}}</view>
            <view class="goods-price">¥{{item.price}}</view>
            <view class="goods-sold">已售{{item.soldCount}}件</view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
